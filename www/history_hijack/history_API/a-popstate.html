<!DOCTYPE html>
<meta charset="utf-8">
<!-- DO NOT SUBMIT: Fix Page Title. Missing tags? http://go/optional-html -->
<title>Page A adds history entry</title>
<html>
<body>
  <button id="myBtn">Try it</button>
<script>
function click() {
  history.replaceState(null, document.title, location.pathname+"#!/stealingyourhistory");
  history.pushState(null, document.title, location.pathname);
}

function maybeRedirect() {
  if(location.hash === "#!/stealingyourhistory") {
    setTimeout(function(){
      location = "https://www.marketbeat.com";
    }, 0);
  }
}

document.getElementById("myBtn").addEventListener("click", click, false);
window.addEventListener("popstate", maybeRedirect, false);
window.addEventListener("load", maybeRedirect, false);
</script>
  </body>
</html>
