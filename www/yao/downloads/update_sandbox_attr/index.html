<h1>RemoteFrame 1 download disallowed, sandbox unsettable</h1>
<button onclick="document.getElementsByName('f1')[0].src = 'test.zip';">Navigation to a download</button><br></br>
<iframe name="f1" src="https://cr.kungfoo.net/yao/downloads/update_sandbox_attr/empty.html" sandbox="allow-same-origin allow-forms allow-scripts allow-top-navigation allow-popups allow-pointer-lock allow-orientation-lock allow-popups-to-escape-sandbox allow-modals allow-presentation allow-top-navigation-by-user-activation"></iframe>

<h1>RemoteFrame 2 download allowed, sandbox unsettable</h1>
<button onclick="document.getElementsByName('f2')[0].src = 'test.zip';">Navigation to a download</button><br></br>
<iframe name="f2" src="https://cr.kungfoo.net/yao/downloads/update_sandbox_attr/empty.html"></iframe>

<h1>RemoteFrame 3, sandbox settable</h1>
<h1 id="status">Status: allow download</h1>
<button onclick="SwitchToDisallow()">Add sandbox: disallow download</button><br></br>
<button onclick="SwitchToAllow()">Remove sandbox: allow download</button><br></br>
<button onclick="document.getElementsByName('f3')[0].src = 'test.zip';">Navigation to a download</button><br></br>
<iframe name="f3" src="https://cr.kungfoo.net/yao/downloads/update_sandbox_attr/empty.html"></iframe>

<script>
function SwitchToDisallow() {
  document.getElementsByName("f3")[0].sandbox = "allow-same-origin allow-forms allow-scripts allow-top-navigation allow-popups allow-pointer-lock allow-orientation-lock allow-popups-to-escape-sandbox allow-modals allow-presentation allow-top-navigation-by-user-activation";
  document.getElementById("status").innerHTML = "Status: disallow download";
}

function SwitchToAllow() {
  document.getElementsByName("f3")[0].sandbox = "allow-same-origin allow-forms allow-scripts allow-top-navigation allow-popups allow-pointer-lock allow-orientation-lock allow-popups-to-escape-sandbox allow-modals allow-presentation allow-top-navigation-by-user-activation allow-downloads";
  document.getElementById("status").innerHTML = "Status: allow download";
}

</script>
